@import 'animate.css';      

@tailwind base;
@tailwind components;
@tailwind utilities;

/* =================== Safe Area / TabBar global =================== */
/* Altura padrão da BottomNavigation; ajuste se necessário */
:root {
  --tabbar-h: 0px; /* ↓ menor para reduzir o “vão” externo */
}

/* Utilitários opcionais */
@layer utilities {
  .pt-safe { padding-top: calc(env(safe-area-inset-top) + 8px); }
  .pb-safe { padding-bottom: calc(var(--tabbar-h) + env(safe-area-inset-bottom)); }
}

/* ───────────────────────────────────────────────────────────
   Safari iOS estilização de <input type="date">
   ─────────────────────────────────────────────────────────── */
@layer base {
  input[type="date"] {
    -webkit-appearance: none;
    appearance: none;
  }
  input[type="date"]::-webkit-date-and-time-value { text-align: left; }
}

/* (opcional) utilitários de impressão */
@layer utilities {
  .print\:shadow-none { @apply shadow-none !important; }
  .print\:border-gray-300 { @apply border-gray-300 !important; }
  .print\:rounded-md { @apply rounded-md !important; }
  .print\:break-inside-avoid { break-inside: avoid; }
}

/* Shake suave para erros no modal */
@keyframes shake {
  0%,100% { transform: translateX(0); }
  20%     { transform: translateX(-4px); }
  40%     { transform: translateX(4px); }
  60%     { transform: translateX(-3px); }
  80%     { transform: translateX(3px); }
}
.animate-shake { animation: shake .22s ease-in-out; }

/* ======== BLOQUEIOS MOBILE PROFISSIONAIS ======== */

/* ocupa a viewport toda e evita “vazamento” de scroll */
html, body, #root {
  height: 100%;
}

/* trava o rubber-band/pull-to-refresh na viewport */
body {
  overscroll-behavior-y: none;
  overscroll-behavior-x: none;
  -webkit-overflow-scrolling: auto;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  touch-action: pan-x pan-y;
}

/* evita double-tap zoom em botões/links */
button, a, [role="button"] {
  touch-action: manipulation;
}

/* (opcional) se houver um container rolável principal, use esta classe nele */
.app-scroll { overscroll-behavior: contain; }

/* === Travar rolagem da viewport (iOS Safari/PWA) === */
html, body {
  height: 100%;
  overflow: hidden;
  margin: 0;
}

/* Fundo claro da viewport */
html { background-color: #f9fafb; }

body {
  position: fixed;
  inset: 0;
  overscroll-behavior: none;
  -webkit-overflow-scrolling: auto;
}

/* root ocupa a tela toda */
#root { height: 100%; }

/* ================== CONTAINER QUE ROLA A PÁGINA ================== */
/* ✅ Padrão: só a safe-area inferior (sem TabBar) */
.app-viewport {
  height: 100%;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  background-color: #f9fafb;

  padding-bottom: env(safe-area-inset-bottom);
}

/* ✅ Quando houver TabBar visível, adiciona a altura dela */
/*     Diminuímos 8px para tirar o “excesso” externo */
.app-viewport.has-tabbar {
  padding-bottom: calc(var(--tabbar-h) + env(safe-area-inset-bottom) - 8px);
}

/* ✅ Normaliza páginas que usam min-h-screen para respeitar o padding do app-viewport
      e ainda cria um respiro interno no fim do scroll (16px) */
.app-viewport .min-h-screen {
  min-height: 100%;
  padding-bottom: 100px; /* margem DENTRO do conteúdo rolável */
}

/* Pinta a faixa da safe area superior (iOS) com a mesma cor do app */
body::before {
  content: "";
  position: fixed;
  top: 0; left: 0; right: 0;
  height: env(safe-area-inset-top);
  background: #f9fafb;
  z-index: 2147483647;
  pointer-events: none;
}

/* esconde scrollbars */
.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.no-scrollbar::-webkit-scrollbar {
  width: 0;
  height: 0;
  display: none;
  background: transparent;
}

/* (opcional) se quiser uniformizar também a bottom safe area:
body::after {
  content: "";
  position: fixed;
  left: 0; right: 0; bottom: 0;
  height: env(safe-area-inset-bottom);
  background: #f9fafb;
  z-index: 2147483647;
  pointer-events: none;
}
*/
